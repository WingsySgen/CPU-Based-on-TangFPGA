### 基于Sipeed Tang Nano 9k/20k的简易CPU/框架 v1

---

基于Sipeed Tang Nano 9k/20k的简易CPU/框架 v1

- [简介](#简介)
- [使用方法](#使用方法)
- [CPU结构简介](#CPU结构简介)
- [常量与指令集](#常量与指令集)
- [其它](#其它)

#### 简介

***

基于Tang Nano 9k/20k的简易CPU/框架。定长指令，哈佛结构，单周期设计。目前仅支持8bit版本，32bit版本正在测试中。

在该框架下可接任意IO以实现更加方便地进行软核 + FPGA的开发模式，所有IO都被连接到一块IO控制模块上映射到一个寄存器中。已支持UART、SPI等协议。

该项目使用Verilog在Tang FPGA上实现CPU。可以使用任意文本编辑器写适用于该CPU的汇编命令，然后使用C++进行从汇编到比特流的映射，写到Verilog的Gowin IP核初始化文件中烧入FPGA。

由于8bit版本最大只支持256条指令，所以暂不考虑在8bit版本中实装中断系统。



#### 使用方法

***

环境要求：

	1. C++11以上的编译环境
	1. 高云云源IDE

`\Verilog`下是CPU的实现，下载并在云源IDE中添加到工程中。

`\Cpp`下是汇编器的实现。

分别修改`\Cpp\main.cpp`中**SOURCE**和**TARGET**为你**汇编代码文本的路径**以及`\Verilog\src\ROM_32bit\ROM_32bit.v`（仅8bit版本下）的路径。之后运行main.cpp，当命令行显示Done并自动关闭时说明映射完毕，如果显示Wrong说明在代码中发现了错误。成功之后在高云云源中综合并烧录，烧录至你的FPGA即可。

如果你只需要需要一个能工作在FPGA上，但可以不像RISC-V那样专业的软核，作为一个简易的实现，你可以仅仅了解如何通过**指令集**让这块CPU工作即可。



#### CPU结构简介

***

见 `\Verilog\CPU结构简介.md`



#### 常量与指令集

***

见 `\ISA\常量与指令集.md`



#### 其它

***

如果你也是一名初学者，并且对CPU的实现感兴趣的话，你应该需要：

前置知识：C++、数字电子技术、Verilog、计算机组成（微机原理、接口技术）等。

推荐《CPU自制入门》作为入门书籍，本书可以为初学者提供一些思路。

推荐游戏《Turing Complete》，steam在售。教玩家从一个与非门开始搓出一整套计算机并使用汇编实现一些功能，贯穿了从数电基础开始到计算机组成的知识点。

这是一个将数门课程综合运用的一个过程。

实际上该项目最初的实现就是由我在《Turing Complete》中实现的CPU发展而来。并用在了2023年年初西南科技大学开设的处理器项目设计中。

